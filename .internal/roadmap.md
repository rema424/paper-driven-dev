# ロードマップ（2026-02-21 改訂）

## 現在地（最終更新: 2026-02-21）

**Phase 2: フルペーパー化 — Step 2.6 論文全面改訂完了**

```
Phase 0: Bootstrap                    ✅ 完了
Phase 1: 投稿前改訂                    ✅ 完了（Workshop/短報レベル）
Phase 2: フルペーパー化                 ⏳ 方向転換後ロードマップ実行中
  Step 2.0: 研究計画の固定              ✅
  Step 2.1: D条件の設計と予備実験        ✅
  Step 2.2: N拡張実験（GPT-5.2）        ✅ 40回実行+著者採点+統計分析
  --- 方向転換（§9.1 発動）---
  A-1: プロトコル逸脱の記録             ✅
  A-2: Codex との Narrative 議論        ✅
  Step 2.3: 第三者盲検評価              ⏳ 評価パッケージ作成完了、評価者募集待ち
  Step 2.4: 外的妥当性の確保            ⬚ 未着手
  Step 2.5: 差別化強化                  ⬚ 未着手
  Step 2.6: 論文の全面改訂              ✅ 全セクション改訂完了
  Step 2.7: 投稿                       ⬚ 未着手
```

- 最新コミット: `b7a3558 paper: Abstract を全面書き換え、Title を新 thesis に変更`
- タグ: `v0-draft`（`ad30111`）、`v1-protocol`（Step 2.0 固定）
- ブランチ: `main`（リモートに 84+ コミット未プッシュ）

### Step 2.2 の結果サマリー

**外在化効果** {C,D} vs {A,B}: **強く支持** (CR: p < 0.0001, TP: p < 0.0001, δ = 1.000)
**フレーミング効果** C vs D: **不支持** (CR: p = 1.000, TP: p = 0.576)
**TOST 同等性** C ≈ D: **確立** (CR: p < 0.0001, TP: p < 0.0001)

→ プロトコル §9.1 の中止基準発動: D ≈ C のため、テンプレート効果の主張は成立しない。
→ 方向転換: 「論文形式の効果」から「構造化要求の外在化効果」へ。

### 次のアクション

1. **Step 2.3 実行**: 評価者の募集・依頼（評価パッケージ配布 → 校正 → 本番 → ICC 算出）
2. **Codex レビュー**: Step 2.6 全面改訂のレビュー（整合性・論証の穴・表現改善）
3. **Step 2.4**: 外的妥当性の確保（追加モデルで4条件実験）

### 実験出力の現状（`docs/examples/fullpaper/`）

| ファイル | Run 1 | Run 2 | Run 3 | Run 4 | Run 5 |
|----------|-------|-------|-------|-------|-------|
| cs1-conventional | ✅ | ✅ | ✅ | ✅ | ✅ |
| cs1-paper-format | ✅ | ✅ | ✅ | ✅ | ✅ |
| cs1-pdd-template | ✅ | ✅ | ✅ | ✅ | ✅ |
| cs1-checklist | ✅ | ✅ | ✅ | ✅ | ✅ |
| cs2-conventional | ✅ | ✅ | ✅ | ✅ | ✅ |
| cs2-paper-format | ✅ | ✅ | ✅ | ✅ | ✅ |
| cs2-pdd-template | ✅ | ✅ | ✅ | ✅ | ✅ |
| cs2-checklist | ✅ | ✅ | ✅ | ✅ | ✅ |

---

## Phase 0: Bootstrap ✅

（省略。初期監査・タグ作成。）

## Phase 1: 投稿前改訂 ✅

### 完了済みの主要マイルストーン

| Step | 内容 | 状態 |
|------|------|------|
| 1.1 | 論証構造の修正（主張リフレーミング、交絡因子、メタ情報） | ✅ |
| 1.2a | 3条件比較 + B バリアント実験 + 論文全面改訂 | ✅ |
| 1.2c | 多モデル観察の記述 | ✅ |
| 1.3 | 体裁・品質改善 | ✅ |
| 1.4 | 完成度評価（CC×Codex）→ P0 アクション4件完了 | ✅ |
| 1.5 | constraints disclosed の exploratory 再分類 | ✅ |
| 1.6 | S6 Related Work 拡充（+3参考文献） | ✅ |
| 1.7 | article-draft.md への再採点結果反映 | ✅ |

### 未着手（Phase 2 に統合）

| Step | 内容 | 移行先 |
|------|------|--------|
| 1.2b | 強化版 Before プロンプト（CoT + ペルソナ）との比較 | Phase 2 Step 2.5 |

---

## Phase 2: フルペーパー化 ⏳

CC×Codex 議論（2026-02-20）の合意に基づく。
議論記録: `.internal/docs/discussion-2026-02-20-fullpaper-roadmap.md`

### 要件分類

| 分類 | 項目 |
|------|------|
| **必須** | 研究計画固定（Step 2.0）、D 条件（Step 2.1）、N≥5（Step 2.2）、第三者盲検（Step 2.3） |
| **準必須** | 外的妥当性1軸: 追加1モデル or 追加1ドメイン（Step 2.4） |
| **強く推奨** | 外的妥当性2軸の両達成、下流アウトカム1指標（Step 2.5） |
| **望ましい** | 強化版プロンプト比較、コスト効率分析（Step 2.5） |

### Step 2.0: 研究計画の固定 ✅

**目的**: 事後的な仮説変更・分析恣意性への防御。

- [x] 仮説を形式化（H_main, H_framing, H_checklist）
- [x] 評価ルーブリック v2 を策定（具体例・判定フロー・3要素必須ルール付き）
- [x] 実験プロトコルを文書化（4条件 × 2CS × 5回 = 40実行）
- [x] 盲検手順を文書化（単盲検、ICC/Krippendorff α、条件推定記録）
- [x] D 条件のプロンプトを設計（C と同型の粒度、フレーミングのみ差異）
- [x] 統計解析を二本立てに設計（外在化効果 + フレーミング効果）
- [x] Codex レビュー2ラウンド完了（6点+7点の指摘に対応）
- [x] タイムスタンプ付きで固定: `v1-protocol` タグ（2026-02-20）
- [ ] （可能であれば）OSF に事前登録

成果物: `paper/protocol-v1.md`

**完了条件**: ✅ プロトコルが Git tag で固定。

---

### Step 2.1: D 条件の設計と予備実験 ✅

**目的**: テンプレート効果を論文形式効果から分離。

- [x] D 条件プロンプトの最終化（Step 2.0 で設計、Codex レビュー済み）
- [x] 予備実行（CS1・CS2 各1回）で D 条件の出力を確認
- [x] D 条件がチェックリスト項目に応答しているか定性的に確認
- [x] プロンプト調整は不要と判断

成果物: `docs/examples/fullpaper/pilot/cs{1,2}-checklist-pilot1.md`

**完了条件**: ✅ D 条件プロンプトが安定し、有意義な出力が得られることを確認。

---

### Step 2.2: N 拡張実験（GPT-5.2） ✅

**目的**: within-condition variability の測定と統計的検定の実施。

- [x] 4条件（A/B/C/D）× 2ケーススタディ × 5回 = 40 回の LLM 実行
- [x] 全出力を `docs/examples/fullpaper/` に保存
- [x] 著者による1次採点（ルーブリック v2）→ `paper/scoring-data-v2.md`
- [x] 統計分析（層別置換検定 + Cliff's delta + TOST）→ `paper/analysis-results-v2.md`

**主な結果**:
- 外在化効果 {C,D} > {A,B}: CR p < 0.0001, TP p < 0.0001（δ = 1.000, 完全分離）
- フレーミング効果 C > D: 不支持（CR p = 1.000, TP p = 0.576）
- TOST 同等性 C ≈ D: 確立（CR p < 0.0001, TP p < 0.0001）
- 予想外: B vs A で TP が有意（B ≈ 2, A ≈ 0）

成果物:
- LLM 出力: `docs/examples/fullpaper/cs{1,2}-{condition}-run{1-5}.md`（40件）
- 採点データ: `paper/scoring-data-v2.md`
- 統計解析結果: `paper/analysis-results-v2.md`
- 解析スクリプト: `paper/analysis/statistical_analysis.py`

**完了条件**: ✅ 40回実行、全出力採点、統計分析完了。

---

### 方向転換: §9.1 発動（2026-02-20）

Step 2.2 の結果により、プロトコル §9.1 の中止基準が発動:

> 「D 条件で C と統計的に同等の co-primary 指標が出た場合: テンプレート効果の主張は成立しない。チェックリスト効果の研究に方向転換を検討」

**結論**: 「論文形式の効果」ではなく「構造化分析要求の外在化効果」が活性成分。

逸脱記録: `paper/protocol-deviations.md`

---

### A-1: プロトコル逸脱の記録 ✅

- [x] `paper/protocol-deviations.md` を作成
- [x] 逸脱 #1: 仮説ピボット（§9.1 発動、H_main を「C > all」→「{C,D} > {A,B} + C ≈ D」へ）
- [x] 逸脱 #2: B vs A の TP 有意性は事前予測に反する（post-hoc/exploratory として報告）

成果物: `paper/protocol-deviations.md`

---

### A-2: Codex との Narrative 議論 ✅

**目的**: 方向転換後の論文の骨格を確定する。

議論記録: CC×Codex 構造化議論（2026-02-20）

#### 合意事項

**1. Thesis の最終文言**

> 「本研究は、LLM の設計分析品質（co-primary 指標）の向上は、学術論文形式そのものではなく、分析ステップを明示する構造化要求（外在化）によって主に生じ、論文フレーミングは限定的な二次効果にとどまることを、4条件統制実験で示す。」

**2. タイトルの最終案**

> Structured Analysis Requirements Drive LLM Design Quality Beyond Paper Framing: A Four-Condition Controlled Experiment

**3. PDD 用語の扱い方針**

- PDD は「研究の出発点となった仮説・実装（C 条件）」として位置づける
- 最終的な理論主張は PDD 固有効果ではなく「構造化外在化」という上位メカニズムに置く
- タイトルには PDD を入れない
- 記述配置: §1 で起源を簡潔に導入、§3 で条件対応（C=PDD, D=Checklist）を明示、§5 で仮説更新を明文化

**4. フレーミング効果の記述方針**

- 「主効果は構造化要求」と明示
- 学術論文フレーミングは TP に限定的な二次効果を持ち得るが、co-primary 全体の主要因ではないと記述
- 「完全に非依存」「全面否定」のような過強表現は避ける

**5. その他の合意事項**

- 効果主張の射程は co-primary 指標に限定、下流アウトカムには拡張しない
- TOST は「事前マージン内同等性」として扱い、過剰断言を避ける
- C ≈ D をもって PDD 固有優位仮説は支持しないという整理で統一

#### 貢献リスト

1. **主貢献**: 構造化分析要求が検証関連指標（CR, TP）で完全分離（δ = 1.000）を生むことの実験的証拠
2. **主貢献**: 学術論文フレーミングがチェックリストに対して有意な付加価値を持たないことの同等性証明（TOST p < 0.0001）
3. **副貢献**: 論文形式フレーミング単体が数学的形式化を通じて部分的に TP を引き出す発見（B ≈ 2.0 vs A ≈ 0.2）— 三層階層 A < B < {C,D} の確立
4. **方法論貢献**: 事前登録済み4条件実験プロトコル（ピボット基準 §9.1 を含み、実際に発動）
5. **実践貢献**: 等価な2実装（PDD テンプレートとチェックリスト）のオープンソース公開

**完了条件**: ✅ Codex との議論でタイトル・thesis・PDD 用語の方針が確定。

---

### Step 2.3: 第三者盲検評価 ⏳

**目的**: 著者評価バイアスの排除、inter-rater reliability の確立。

- [ ] 評価者の募集（2名以上）
- [x] 評価パッケージの作成（ルーブリック v2 + 採点シート + 手順書）
- [x] 盲検スクリプト作成・実行（40件盲検化 + 校正5件）
- [ ] 校正ラウンド（5件で練習）
- [ ] 本番盲検（40件、条件ラベル除去、ランダム順）
- [ ] ICC の算出（合格基準: ICC ≥ 0.60）
- [ ] 評価者間の不一致分析
- [ ] **追加分析**: 評価者が C と D を区別できるか（条件推定精度）の分析
  - 区別できない → 同等性の追加証拠
  - 区別できるがスコアが同等 → より強い証拠

成果物:
- `paper/evaluation/rubric-v2.md` — ルーブリック v2 独立文書
- `paper/evaluation/procedure-guide.md` — 評価者向け手順書
- `paper/evaluation/scoring-sheet-template.md` — 採点シートテンプレート
- `paper/evaluation/blinding/blind_outputs.py` — 盲検スクリプト（seed=42/142）
- `paper/evaluation/blinded/output-{001..040}.md` — 盲検済み出力
- `paper/evaluation/calibration/calibration-{001..005}.md` — 校正用出力

**完了条件**: ICC ≥ 0.60 達成、盲検採点データの完備。

---

### Step 2.4: 外的妥当性の確保（準必須） ⬚

**目的**: 結果の一般化可能性の確認。

**検証仮説の調整**（方向転換後）:
- **旧**: 「C > all」の再現
- **新**: 「{C, D} > {A, B} かつ C ≈ D」の再現

実施内容:
- [ ] 追加1モデル（Claude Sonnet 等）で4条件実験
- [ ] 外在化効果の再現確認
- [ ] D ≈ C の再現確認

**完了条件**: 追加モデルで外在化効果 + D ≈ C が再現。

---

### Step 2.5: 差別化強化（強く推奨 / 望ましい） ⬚

**目的**: 貢献の独自性と実践的価値の強化。

方向転換後の優先順位:

| 優先度 | 項目 | 内容 |
|--------|------|------|
| 最優先 | 下流アウトカム測定 | 構造化分析 → 実装品質の因果関係 |
| 推奨 | 強化版プロンプト比較 | CoT+ペルソナ vs チェックリスト |
| 新規 | 最小有効チェックリスト研究 | アブレーション — どの項目が最も効果的か |

**完了条件**: 下流アウトカム1指標以上の測定完了。

---

### Step 2.6: 論文の全面改訂 ⏳

**目的**: 方向転換後の新 thesis に基づく論文再構築。

#### 論文セクション改訂計画

| セクション | 現状 | 改訂方針 | 優先度 | 状態 |
|-----------|------|---------|-------|------|
| Abstract | PDD 中心 | **全面書き換え**: 構造化外在化を主語に | 1 | ✅ |
| §1 Introduction | PDD を解法として提示 | **大幅書き換え**: RQ を「フレーミングか構造か」に転換 | 5 | ✅ |
| §2 Background | LLM 支援開発+構造化出力 | **部分修正**: チェックリスト文献を追加 | 8 | ✅ |
| §3 Methods | ~~PDD 方法論~~ | **再構成**: 4条件+実験計画+統計分析計画 | 4 | ✅ |
| §4 Results | Phase 1 N=2 データ | **全面書き換え**: Phase 2 N=40 の統計結果を中心に | 2 | ✅ |
| §5 Discussion | フレーミング効果天井 | **大幅書き換え**: 「構造 > フォーマット」、三層階層 | 3 | ✅ |
| §6 Related Work | 5件の関連研究 | **拡張**: チェックリスト系、構造化プロンプト系の文献追加 | 9 | ✅ |
| §7 Future Work | 8項目（D条件等は完了） | **改訂**: 完了項目の削除、新項目追加 | 7 | ✅ |
| §8 Conclusion | PDD の成果 | **全面書き換え**: 新 thesis に合わせる | 6 | ✅ |
| Appendices | Phase 1 詳細 | **大幅拡張**: Phase 1 データ移動、Rubric v2 全文 | 10 | ✅ A.1/A.3/A.4 更新、C 作成済み |
| Title | Paper-Driven Development | **変更必須**: 最終内容確定後に決定 | 11 | ✅ |

#### Phase 1 と Phase 2 のデータ統合方針

- **Phase 1**（N=2, 3条件）: 仮説を生成した探索的研究として §4.2 で簡潔に言及。詳細テーブルは Appendix へ
- **Phase 2**（N=5, 4条件）: 確認的研究として §4 の中心。全統計量は Phase 2 データのみ
- プロトコル §10.2 に準拠:「Phase 1 データは本解析に含めない」

#### B vs A の TP 有意性（予想外の発見）の扱い

- §4 Results 内に「予想外の発見」サブセクションとして報告
- §5 Discussion で三層階層（A < B < {C, D}）として解釈
- 事前登録外の post-hoc 発見であることを明記
- 「B は数学的形式化を通じて TP を部分的に引き出すが、{C, D} との間には依然として完全分離（δ = 1.000）が存在する」

**完了条件**: Codex レビュー複数ラウンド完了、全セクション改訂済み。

---

### Step 2.7: 投稿 ⬚

**投稿先推奨**: ESEM または ICSE/FSE の実証研究トラック
- 事前登録ピボットの知的誠実性は実証 SE 会議で高く評価される
- 「自身の仮説を検証し帰無を受容した」narrative は査読で好印象

**完了条件**: 論文投稿完了、`v1-submitted` タグ作成。

---

## 実行優先順位

| # | アクション | 依存 | 状態 | 備考 |
|---|-----------|------|------|------|
| 1 | プロトコル逸脱の記録（A-1） | なし | ✅ | `paper/protocol-deviations.md` |
| 2 | Codex と Narrative 議論（A-2） | #1 | ✅ | タイトル・thesis・PDD 用語を確定 |
| 3 | Step 2.3 準備（評価パッケージ作成） | なし | ⬚ | #2 と並行可 |
| 4 | Step 2.3 実行（盲検評価） | #3 | ⬚ | 評価者確保が律速 |
| 5 | §4 Results 書き換え | #4 完了後 | ⬚ | ICC 結果を含める |
| 6 | §3 Methods 再構成 | #2 | ⬚ | — |
| 7 | §5 Discussion 書き換え | #5, #6 | ⬚ | — |
| 8 | §1 Introduction + §8 Conclusion | #7 | ⬚ | — |
| 9 | 残りセクション（§2, §6, §7, Appendix） | #8 | ⬚ | — |
| 10 | タイトル確定 | #9 | ⬚ | 最後 |
| 11 | Step 2.4 外的妥当性 | #4 ICC OK | ⬚ | 並行可 |
| 12 | Step 2.7 投稿 | 全完了 | ⬚ | — |

---

## Phase 3-5: 査読対応（将来）

（内容は従来どおり）

---

## 評価見込み

| マイルストーン | 想定レベル |
|---------------|-----------|
| Phase 1 完了（現状） | Workshop ✅ / 短報 ✅ |
| Step 2.0-2.3 完了（内的妥当性） | フルペーパー最低ライン（限定主張） |
| Step 2.4 完了（外的妥当性1軸） | フルペーパー安全ライン |
| Step 2.5 完了（差別化） | フルペーパー競争力あり |

---

## 実行上の注意（ソロ研究者向け）

1. **第三者評価者は早期に確保**: Step 2.0 の段階で2名に打診。評価パッケージを先に作り、依頼時に所要時間を明示。
2. **各フェーズ末で go/no-go 判定**: 過剰拡張を防ぐ。Step 2.3 で ICC < 0.60 なら先に進まずルーブリック再校正。
3. **実験実行の自動化**: LLM 実行と集計はスクリプト化。手作業は採点運営に集中。
4. **方向転換の検討**: ✅ D ≈ C が確認されたため、テンプレート効果から外在化効果へのリフレーミングを実行。プロトコル §9.1 に基づく想定内の方向転換。
5. **リモートプッシュ**: 58+ コミット未プッシュ。定期的にプッシュすること。
